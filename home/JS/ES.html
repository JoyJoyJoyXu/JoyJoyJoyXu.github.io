<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ES新特性汇总 | xal&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.1">
    
    <meta name="description" content="不积硅步无以至千里">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.db583d94.js" as="script"><link rel="preload" href="/assets/js/2.13f24521.js" as="script"><link rel="preload" href="/assets/js/52.7761ae31.js" as="script"><link rel="prefetch" href="/assets/js/10.20f1c349.js"><link rel="prefetch" href="/assets/js/11.e9a3a4d7.js"><link rel="prefetch" href="/assets/js/12.800ac1de.js"><link rel="prefetch" href="/assets/js/13.eeb3a0d5.js"><link rel="prefetch" href="/assets/js/14.d0306435.js"><link rel="prefetch" href="/assets/js/15.dd16db64.js"><link rel="prefetch" href="/assets/js/16.960607bf.js"><link rel="prefetch" href="/assets/js/17.a9bc1e47.js"><link rel="prefetch" href="/assets/js/18.59dba844.js"><link rel="prefetch" href="/assets/js/19.1ad3d500.js"><link rel="prefetch" href="/assets/js/20.b4ad3d9f.js"><link rel="prefetch" href="/assets/js/21.4ca61081.js"><link rel="prefetch" href="/assets/js/22.ce333414.js"><link rel="prefetch" href="/assets/js/23.76f26f55.js"><link rel="prefetch" href="/assets/js/24.cb939bef.js"><link rel="prefetch" href="/assets/js/25.0f9bf0a2.js"><link rel="prefetch" href="/assets/js/26.eef836fe.js"><link rel="prefetch" href="/assets/js/27.62af0bc1.js"><link rel="prefetch" href="/assets/js/28.2736074d.js"><link rel="prefetch" href="/assets/js/29.0f594431.js"><link rel="prefetch" href="/assets/js/3.f72fd6e6.js"><link rel="prefetch" href="/assets/js/30.87b6f964.js"><link rel="prefetch" href="/assets/js/31.4a2a7d81.js"><link rel="prefetch" href="/assets/js/32.007f9cb2.js"><link rel="prefetch" href="/assets/js/33.35f87b20.js"><link rel="prefetch" href="/assets/js/34.bfad2641.js"><link rel="prefetch" href="/assets/js/35.f3f9fd70.js"><link rel="prefetch" href="/assets/js/36.db51391d.js"><link rel="prefetch" href="/assets/js/37.4ce99ebd.js"><link rel="prefetch" href="/assets/js/38.ad423e48.js"><link rel="prefetch" href="/assets/js/39.f9c98285.js"><link rel="prefetch" href="/assets/js/4.76b7f9ea.js"><link rel="prefetch" href="/assets/js/40.a1f23fb3.js"><link rel="prefetch" href="/assets/js/41.de28988e.js"><link rel="prefetch" href="/assets/js/42.46c2ad3d.js"><link rel="prefetch" href="/assets/js/43.3fc4e391.js"><link rel="prefetch" href="/assets/js/44.3daad448.js"><link rel="prefetch" href="/assets/js/45.cd4a9560.js"><link rel="prefetch" href="/assets/js/46.fd8a5806.js"><link rel="prefetch" href="/assets/js/47.6285f855.js"><link rel="prefetch" href="/assets/js/48.d8e67c73.js"><link rel="prefetch" href="/assets/js/49.043270fd.js"><link rel="prefetch" href="/assets/js/5.86ead953.js"><link rel="prefetch" href="/assets/js/50.2a92ea97.js"><link rel="prefetch" href="/assets/js/51.5dd5aeac.js"><link rel="prefetch" href="/assets/js/53.5e0482a2.js"><link rel="prefetch" href="/assets/js/54.b440e01b.js"><link rel="prefetch" href="/assets/js/55.6d23d511.js"><link rel="prefetch" href="/assets/js/56.1cecfbce.js"><link rel="prefetch" href="/assets/js/57.ea590f0c.js"><link rel="prefetch" href="/assets/js/58.3243c66e.js"><link rel="prefetch" href="/assets/js/59.0f685c61.js"><link rel="prefetch" href="/assets/js/6.edb20b01.js"><link rel="prefetch" href="/assets/js/60.2e107991.js"><link rel="prefetch" href="/assets/js/61.93df4bd3.js"><link rel="prefetch" href="/assets/js/62.72c8a1e4.js"><link rel="prefetch" href="/assets/js/63.61d90723.js"><link rel="prefetch" href="/assets/js/64.ab8607c9.js"><link rel="prefetch" href="/assets/js/65.0411cf08.js"><link rel="prefetch" href="/assets/js/66.e085990a.js"><link rel="prefetch" href="/assets/js/67.04c772cb.js"><link rel="prefetch" href="/assets/js/7.0bf49390.js"><link rel="prefetch" href="/assets/js/8.ddb2f3fe.js"><link rel="prefetch" href="/assets/js/9.8139f065.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">xal's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/home/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/engineering/" class="nav-link">
  React源码解析
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/home/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/engineering/" class="nav-link">
  React源码解析
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JS</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/home/JS/promise.html" class="sidebar-link">Promise</a></li><li><a href="/home/JS/shouxie.html" class="sidebar-link">手写系列</a></li><li><a href="/home/JS/metaprogramming.html" class="sidebar-link">元编程</a></li><li><a href="/home/JS/arrows.html" class="sidebar-link">箭头函数</a></li><li><a href="/home/JS/ES.html" aria-current="page" class="active sidebar-link">ES新特性汇总</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/home/JS/ES.html#es6" class="sidebar-link">ES6</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/home/JS/ES.html#let、const、block作用域" class="sidebar-link">let、const、block作用域</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#symbol" class="sidebar-link">Symbol</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#set-和-map" class="sidebar-link">Set 和 Map</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#iterator-和-generator" class="sidebar-link">Iterator 和 Generator</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#promise" class="sidebar-link">Promise</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#proxy-和-reflect" class="sidebar-link">Proxy 和 Reflect</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#类" class="sidebar-link">类</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#es-moudule" class="sidebar-link">ES Moudule</a></li></ul></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#es7" class="sidebar-link">ES7</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/home/JS/ES.html#array-prototype-includes" class="sidebar-link">Array.prototype.includes()</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#指数操作符" class="sidebar-link">指数操作符</a></li></ul></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#es8" class="sidebar-link">ES8</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/home/JS/ES.html#async-await" class="sidebar-link">async/await</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#object-values" class="sidebar-link">Object.values()</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#object-entries" class="sidebar-link">Object.entries()</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#string-prototype-padstart-和-string-prototype-padend" class="sidebar-link">String.prototype.padStart() 和 String.prototype.padEnd()</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#函数参数列表结尾允许逗号" class="sidebar-link">函数参数列表结尾允许逗号</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#object-getownpropertydescriptors" class="sidebar-link">Object.getOwnPropertyDescriptors()</a></li></ul></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#es9" class="sidebar-link">ES9</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/home/JS/ES.html#异步迭代" class="sidebar-link">异步迭代</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#promise-finally" class="sidebar-link">Promise.finally()</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#rest-spread-属性" class="sidebar-link">Rest/Spread 属性</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#正则表达式命名捕获组" class="sidebar-link">正则表达式命名捕获组...</a></li></ul></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#es10" class="sidebar-link">ES10</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/home/JS/ES.html#array-flat-和array-flatmap" class="sidebar-link">Array.flat()和Array.flatMap()</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#string-prototype-trimstart-string-prototype-trimend" class="sidebar-link">String.prototype.trimStart()String.prototype.trimEnd()</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#string-prototype-matchall" class="sidebar-link">String.prototype.matchAll</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#symbol-prototype-description" class="sidebar-link">Symbol.prototype.description</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#object-fromentries" class="sidebar-link">Object.fromEntries()</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#可选-catch" class="sidebar-link">可选 Catch</a></li></ul></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#es11" class="sidebar-link">ES11</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/home/JS/ES.html#空值处理" class="sidebar-link">空值处理</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#optional-chaining" class="sidebar-link">Optional chaining</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#promise-allsettled" class="sidebar-link">Promise.allSettled</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#dynamic-import" class="sidebar-link">dynamic-import</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#globalthis" class="sidebar-link">globalThis</a></li><li class="sidebar-sub-header"><a href="/home/JS/ES.html#bigint" class="sidebar-link">BigInt</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTTP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>杂项</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="es新特性汇总"><a href="#es新特性汇总" class="header-anchor">#</a> ES新特性汇总</h1> <p><img src="/img/es.png" alt="es.png" title="es.png"></p> <h2 id="es6"><a href="#es6" class="header-anchor">#</a> ES6</h2> <h3 id="let、const、block作用域"><a href="#let、const、block作用域" class="header-anchor">#</a> <strong>let、const、block作用域</strong></h3> <ol><li><p>let 可以定义一个局部变量，不存在变量提升，不允许重复声明。</p></li> <li><p>const 可以定义一个只读的常量。const定义满足：</p></li></ol> <ul><li>不存在变量提升。</li> <li>一旦声明，常量的值就不能改变。</li> <li>const 在声明时必须被赋值。</li> <li>声明时大写变量（默认规则）。</li></ul> <p>const 实际上保证的，并不是变量的值不得改动，而是变量指向的那个内存地址所保存的数据不得改动。
所以，const用来保存简单类型等同于常量，对于引用类型，变量保存的是指向内存数据的地址，只能保证这个地址不变，不能保证它指向的内存数据不变，如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 为 foo 添加一个属性，可以成功</span>
foo<span class="token punctuation">.</span>prop <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span>prop <span class="token comment">// 123</span>
<span class="token comment">// 将 foo 指向另一个对象，就会报错</span>
foo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// TypeError: &quot;foo&quot; is read-only</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="3"><li>block作用域</li></ol> <p>ES5只有全局作用域和函数作用域，ES6规定{}可以定义块级作用域。</p> <h3 id="symbol"><a href="#symbol" class="header-anchor">#</a> Symbol</h3> <p>ES6 引入了一种新的原始数据类型Symbol，表示独一无二的值。它是 JavaScript 语言的第七种数据类型。</p> <blockquote><p>前六种是：undefined、null、布尔值（Boolean）、字符串（String）、数值（Number）、对象（Object）。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> s <span class="token operator">=</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">typeof</span> s
<span class="token comment">// &quot;symbol&quot;</span>

<span class="token keyword">let</span> s1 <span class="token operator">=</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s1 <span class="token comment">// Symbol(foo)</span>
s2 <span class="token comment">// Symbol(bar)</span>
s1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// &quot;Symbol(foo)&quot;</span>
s2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// &quot;Symbol(bar)&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="set-和-map"><a href="#set-和-map" class="header-anchor">#</a> Set 和 Map</h3> <p><strong>Set</strong></p> <p>ES6 新增了 Set 类型，这是一种<strong>无重复值</strong>的有序列表,允许对它包含的数据进行<strong>快速</strong>访问，从而增加了一个追踪离散值的更有效方式。</p> <p><strong>Set使用</strong>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 5和'5'是两个值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

set<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 删除</span>
set<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 清空</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>WeakSet</strong></p> <p>WeekSet 应用基本同Set，WeekSet用于存储弱引用，区别：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
key <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 

<span class="token comment">// 将对象加入 set </span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true </span>

<span class="token comment">// 移除对于键的最后一个强引用，同时从 Weak Set 中移除 </span>
key <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>以上代码执行以后，weekset中的key就不能访问了，但是set还可以访问，通过<code>key = [...set][0];</code>可以重新获得值。</p> <p><strong>利用Set实现数组去重</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>set<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 1,2,3,4,5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Map</strong></p> <p>ES6 的 Map 类型是键值对的有序列表，而键和值都可以是任意类型。</p> <blockquote><p>对象的键必须是合法的标识符,Map的键可以是用object、函数...。</p></blockquote> <p><strong>Map使用</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Understanding ES6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;year&quot;</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;Understanding ES6&quot; </span>

<span class="token comment">// Map 和 Set 一样，拥有has、delete和clear方法，有size属性。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>WeekMap</strong></p> <p>ES6 的 WeakMap 类型是键值对的无序列表，其中键必须是非空的对象，值则允许是任意类型。</p> <p>WeekMap键是弱引用。在weekmap中，所有的键都必须是对象（尝试使用非对象的键会抛出错误），而且这些对象都是弱引用，不会干扰垃圾回收。当 WeakMap 中的键在 Weak Map 之外不存在引用 时，该键值对会被移除。</p> <blockquote><p>WeekMap 方法和属性参考Map</p></blockquote> <h3 id="iterator-和-generator"><a href="#iterator-和-generator" class="header-anchor">#</a> Iterator 和 Generator</h3> <p><strong>迭代器(Iterator)</strong></p> <p>迭代器是被设计专用于迭代的对象，带有特定接口。</p> <ol><li>所有的迭代器对象都拥有 next() 方法，会返回一个结果对象。</li> <li>该结果对象有两个属性：对应下一个值的 value ，以及一个布尔 类型的 done ，其值为 true 时表示没有更多值可供使用。</li></ol> <p>ES5实现：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createIterator</span><span class="token punctuation">(</span><span class="token parameter">items</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    <span class="token keyword">return</span> <span class="token punctuation">{</span> 
        <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">var</span> done <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> items<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token operator">!</span>done <span class="token operator">?</span> items<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> 
            <span class="token keyword">return</span> <span class="token punctuation">{</span> 
                done<span class="token operator">:</span> done<span class="token punctuation">,</span> 
                value<span class="token operator">:</span> value 
            <span class="token punctuation">}</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>生成器(Generator)</strong></p> <p>Generator是能返回一个迭代器的函数。<br>
生成器函数由放在 function 关键字之 后的一个星号（ * ）来表示，并能使用新的 yield 关键字。</p> <p><strong>访问默认迭代器</strong></p> <p>可以通过Symbol.Iterator来访问默认迭代器，Array、Map和Set都实现了默认迭代接口。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token keyword">let</span> iterator <span class="token operator">=</span> values<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 默认迭代器</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// &quot;{ value: 1, done: false }&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>for...of循环</strong></p> <p>实现了Symbol.Iterator的对象都可以用for...of循环。</p> <p><strong>集合的迭代器</strong></p> <p>ES6 中：数组、 Map 与 Set ，都实现了三种迭代：</p> <ol><li>entries() ：返回一个包含键值对的迭代器；</li> <li>values() ：返回一个包含集合中的值的迭代器；</li> <li>keys() ：返回一个包含集合中的键的迭代器。</li></ol> <blockquote><p>Weak Set 与 Weak Map 并未拥有内置的迭代器。</p></blockquote> <h3 id="promise"><a href="#promise" class="header-anchor">#</a> Promise</h3> <p>参考<a href="/home/JS/promise">Promise</a></p> <h3 id="proxy-和-reflect"><a href="#proxy-和-reflect" class="header-anchor">#</a> Proxy 和 Reflect</h3> <p>参考<a href="/home/JS/metaprogramming">元编程</a></p> <h3 id="类"><a href="#类" class="header-anchor">#</a> 类</h3> <p>ES6 中有 class 语法。值得注意是，这里的 class 只是原型链的语法糖表现形式。</p> <p>关键字： <strong>class、constructor、extends、super、static</strong></p> <p>ES5实现继承：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token parameter">length<span class="token punctuation">,</span> width</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length<span class="token punctuation">;</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token class-name">Rectangle</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getArea</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment">// 静态方法</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Square</span><span class="token punctuation">(</span><span class="token parameter">length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token function">Rectangle</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> length<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token class-name">Square</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span> 
    constructor<span class="token operator">:</span> <span class="token punctuation">{</span> 
        value<span class="token operator">:</span>Square<span class="token punctuation">,</span> 
        enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
        writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
        configurable<span class="token operator">:</span> <span class="token boolean">true</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">var</span> square <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>ES6继承：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span> 
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">length<span class="token punctuation">,</span> width</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length<span class="token punctuation">;</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
    
    <span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 实例方法</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span> 
    <span class="token punctuation">}</span> 

    <span class="token keyword">static</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>   <span class="token comment">// 静态方法</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span> 
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token comment">// 与 Rectangle.call(this, length, length) 相同 </span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// super 调用父类</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>

<span class="token keyword">var</span> square <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="es-moudule"><a href="#es-moudule" class="header-anchor">#</a> ES Moudule</h3> <ol><li>export：导出，可以导出声明或者引用，除了导出部分其他是模块私用的。</li> <li>import：导入，import { identifier1, identifier2 } from &quot;./example.js&quot;;  后面是路径，带上文件后缀。导入整个模块=&gt; import * as a from './a.js'</li> <li>export 和 import 只能在当前顶级作用域使用。</li> <li>默认导出：export default function(){} / export sum default.</li> <li>默认导入：1、import sum from &quot;./example.js&quot;;   不需要大括号， 2、同时导入默认和非默认  ，默认在前面，import sum, { color } from &quot;./example.js&quot;; 或者 import { default as sum, color } from &quot;example&quot;;</li></ol> <h2 id="es7"><a href="#es7" class="header-anchor">#</a> ES7</h2> <h3 id="array-prototype-includes"><a href="#array-prototype-includes" class="header-anchor">#</a> Array.prototype.includes()</h3> <p>ES7中引入includes() 函数用来判断一个数组是否包含一个指定的值，如果包含则返回 true，否则返回 false。
inclueds与indexOf类似，</p> <p><code>arr.includes(x)与arr.indexOf(x) &gt;= 0 等价</code></p> <h3 id="指数操作符"><a href="#指数操作符" class="header-anchor">#</a> 指数操作符</h3> <p>ES7引入**运算符，**具有与 Math.pow(..)等效的计算结果<br> <code>let a = 2**10 // 1024</code></p> <h2 id="es8"><a href="#es8" class="header-anchor">#</a> ES8</h2> <h3 id="async-await"><a href="#async-await" class="header-anchor">#</a> async/await</h3> <h3 id="object-values"><a href="#object-values" class="header-anchor">#</a> Object.values()</h3> <p>Object.values方法返回一个给定对象自身的<strong>所有可枚举属性值</strong>的<strong>数组</strong>，值的顺序与使用for...in循环的顺序相同 ( 区别在于 for-in 循环枚举原型链中的属性 )。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['bar', 42]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="object-entries"><a href="#object-entries" class="header-anchor">#</a> Object.entries()</h3> <p><strong>Object.entries()<strong>方法返回一个给定对象自身</strong>所有可枚举属性</strong>的<strong>键值对数组</strong>，其排列与使用 for...in 循环遍历该对象时返回的顺序一致（区别在于 for-in 循环还会枚举原型链中的属性）。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ ['foo', 'bar'], ['baz', 42] ]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="string-prototype-padstart-和-string-prototype-padend"><a href="#string-prototype-padstart-和-string-prototype-padend" class="header-anchor">#</a> String.prototype.padStart() 和 String.prototype.padEnd()</h3> <p><strong>padStart()</strong> 方法用另一个字符串填充当前字符串(如果需要的话，会重复多次)，以便产生的字符串达到给定的长度。从当前字符串的左侧开始填充。</p> <p><code>str.padStart(targetLength [, padString])</code></p> <p><strong>targetLength</strong>: 当前字符串需要填充到的目标长度。如果这个数值小于当前字符串的长度，则返回当前字符串本身。</p> <p><strong>padString</strong>:可选，填充字符串。如果字符串太长，使填充后的字符串长度超过了目标长度，则只保留最左侧的部分，其他部分会被截断。此参数的默认值为 &quot; &quot;（U+0020）。</p> <p><strong>padEnd()</strong> 方法会用一个字符串填充当前字符串（如果需要的话则重复填充），返回填充后达到指定长度的字符串。从当前字符串的末尾（右侧）开始填充。</p> <p>其他同padStart</p> <h3 id="函数参数列表结尾允许逗号"><a href="#函数参数列表结尾允许逗号" class="header-anchor">#</a> 函数参数列表结尾允许逗号</h3> <p><strong>合法尾随逗号</strong>：</p> <ol><li>允许在参数定义和函数调用后面使用逗号</li> <li>对象字面量和数组字面量后面跟的逗号</li> <li>解构中的尾随逗号</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 参数定义和函数调用</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>
    <span class="token parameter">param1<span class="token punctuation">,</span>
    param2<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span>
    <span class="token string">'abc'</span><span class="token punctuation">,</span>
    <span class="token string">'def'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 对象和数组 字面量</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    first<span class="token operator">:</span> <span class="token string">'Jane'</span><span class="token punctuation">,</span>
    last<span class="token operator">:</span> <span class="token string">'Doe'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>   <span class="token comment">// length 3</span>
    <span class="token string">'red'</span><span class="token punctuation">,</span>
    <span class="token string">'green'</span><span class="token punctuation">,</span>
    <span class="token string">'blue'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 带有尾逗号的数组解构</span>
<span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><strong>不合法的尾随逗号</strong>：</p> <ol><li>仅包含逗号的函数参数定义或者函数调用</li> <li>当使用剩余参数的时候</li> <li>JSON 中的尾随逗号</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 仅包含逗号</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">,</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> 
<span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">,</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>       
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">,</span><span class="token punctuation">)</span> 

<span class="token comment">// 剩余参数</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>p<span class="token punctuation">,</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// JSON SyntaxError </span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'[1, 2, 3, 4, ]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'{&quot;foo&quot; : 1, }'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="object-getownpropertydescriptors"><a href="#object-getownpropertydescriptors" class="header-anchor">#</a> Object.getOwnPropertyDescriptors()</h3> <p>Object.getOwnPropertyDescriptors()函数用来获取一个对象的所有自身属性的描述符,如果没有任何自身属性，则返回空对象。</p> <h2 id="es9"><a href="#es9" class="header-anchor">#</a> ES9</h2> <h3 id="异步迭代"><a href="#异步迭代" class="header-anchor">#</a> 异步迭代</h3> <h3 id="promise-finally"><a href="#promise-finally" class="header-anchor">#</a> Promise.finally()</h3> <p>一个Promise调用链要么成功到达最后一个 .then()，要么失败触发 .catch()。在某些情况下，你想要在无论Promise运行成功还是失败，运行相同的代码，例如清除，删除对话，关闭数据库连接等。</p> <p>ES9引入.finally()允许你指定Promise最终的逻辑。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>doSomething2<span class="token punctuation">)</span>  
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>doSomething3<span class="token punctuation">)</span>  
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  
    <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="rest-spread-属性"><a href="#rest-spread-属性" class="header-anchor">#</a> Rest/Spread 属性</h3> <p>暂略</p> <h3 id="正则表达式命名捕获组"><a href="#正则表达式命名捕获组" class="header-anchor">#</a> 正则表达式命名捕获组...</h3> <p>参考 <a href="">正则表达式</a></p> <h2 id="es10"><a href="#es10" class="header-anchor">#</a> ES10</h2> <h3 id="array-flat-和array-flatmap"><a href="#array-flat-和array-flatmap" class="header-anchor">#</a> Array.flat()和Array.flatMap()</h3> <p><strong>flat()</strong> 方法会按照一个可指定的深度递归遍历数组，并将所有元素与遍历到的子数组中的元素合并为一个新数组返回。</p> <p><code>var newArray = arr.flat([depth]) // depth 默认值1</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr2<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [1, 2, 3, 4, [5, 6]]</span>

<span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr3<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [1, 2, 3, 4, [5, 6]]</span>

<span class="token comment">//使用 Infinity，可展开任意深度的嵌套数组</span>
<span class="token keyword">var</span> arr4 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr4<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>flatMap()</strong> 方法首先使用映射函数映射每个元素，然后将结果压缩成一个新数组。它与 map 和 深度值1的 flat 几乎相同，但 flatMap 通常在合并成一种方法的效率稍微高一些</p> <p><code>TODO</code></p> <h3 id="string-prototype-trimstart-string-prototype-trimend"><a href="#string-prototype-trimstart-string-prototype-trimend" class="header-anchor">#</a> String.prototype.trimStart()String.prototype.trimEnd()</h3> <p>trimStart() 方法从字符串的开头删除空格。trimLeft() 是此方法的别名。
trimEnd() 方法从字符串的开头删除空格。trimRight() 是此方法的别名。</p> <h3 id="string-prototype-matchall"><a href="#string-prototype-matchall" class="header-anchor">#</a> String.prototype.matchAll</h3> <p>参考 <a href="">正则表达式</a></p> <h3 id="symbol-prototype-description"><a href="#symbol-prototype-description" class="header-anchor">#</a> Symbol.prototype.description</h3> <p>创建 Symbol 的时候，可以添加一个描述。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'The description'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sym<span class="token punctuation">.</span>description <span class="token comment">// 'The description'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="object-fromentries"><a href="#object-fromentries" class="header-anchor">#</a> Object.fromEntries()</h3> <p>Object.fromEntries() 方法接收一个键值对的列表参数，并返回一个带有这些键值对的新对象。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'baz'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// { foo: &quot;bar&quot;, baz: 42 }</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token string">'0'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// { 0: &quot;a&quot;, 1: &quot;b&quot;, 2: &quot;c&quot; }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="可选-catch"><a href="#可选-catch" class="header-anchor">#</a> 可选 Catch</h3> <p>ES10 try catch 可以省略异常变量。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 之前 try {} catch(e) {}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="es11"><a href="#es11" class="header-anchor">#</a> ES11</h2> <h3 id="空值处理"><a href="#空值处理" class="header-anchor">#</a> 空值处理</h3> <p>空值合并操作符（??）是一个逻辑操作符，当左侧的操作数为 <strong>null</strong> 或者 <strong>undefined</strong> 时，返回其右侧操作数，否则返回左侧操作数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> level <span class="token operator">=</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> user<span class="token punctuation">.</span>data<span class="token punctuation">.</span>level<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'暂无等级'</span><span class="token punctuation">;</span>

<span class="token comment">// ES11 空值合并</span>
<span class="token keyword">var</span> level <span class="token operator">=</span> user<span class="token operator">?.</span>data<span class="token operator">?.</span>level <span class="token operator">??</span> <span class="token string">'暂无等级'</span>；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="optional-chaining"><a href="#optional-chaining" class="header-anchor">#</a> Optional chaining</h3> <p>Optional chaining: 可让我们在查询具有多层级的对象时，不再需要进行冗余的各种前置校验。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> user <span class="token operator">&amp;&amp;</span> user<span class="token punctuation">.</span>info <span class="token operator">&amp;&amp;</span> user<span class="token punctuation">.</span>info<span class="token punctuation">.</span>name<span class="token punctuation">;</span>

<span class="token comment">// ES11 可选链</span>

<span class="token keyword">var</span> name <span class="token operator">=</span> user<span class="token operator">?.</span>info<span class="token operator">?.</span>name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>可选链 ?. 中?.一起</p></blockquote> <h3 id="promise-allsettled"><a href="#promise-allsettled" class="header-anchor">#</a> Promise.allSettled</h3> <p>为了弥补Promise.all 只要有一个任务reject，Promise 直接进入 reject 状态的缺陷，ES11引入 Promise.allSettled 。</p> <p>Promise.allSettled 可以在并发任务中，无论一个任务正常或者异常，都会返回对应的的状态（fulfilled 或者 rejected）与结果（业务 value 或者 拒因 reason），在 then 里面通过 filter 来过滤出想要结果，这就能最大限度的保障业务当前状态的可访问性。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">allSettled</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>code<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span> msg<span class="token operator">:</span> <span class="token string">'服务异常'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> code<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>code<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ret</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/*
        0: {status: &quot;rejected&quot;, reason: {...}}
        1: {status: &quot;fulfilled&quot;, value: {...}}
        2: {status: &quot;fulfilled&quot;, value: {...}}
    */</span>
    <span class="token comment">// 过滤掉 rejected 状态，尽可能多的保证页面区域数据渲染</span>
    ret<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> el<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'rejected'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="dynamic-import"><a href="#dynamic-import" class="header-anchor">#</a> dynamic-import</h3> <p>ES6的import只能放在文件开头一次性引入，ES11的动态引入，可以理解成“按需加载”。</p> <h3 id="globalthis"><a href="#globalthis" class="header-anchor">#</a> globalThis</h3> <p>JS在不同环境获取全局对象情况不同，</p> <ul><li>NodeJS 通过 global</li> <li>浏览器 通过 window</li> <li>Service Worker 通过 self</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 获取顶层对象</span>
<span class="token keyword">var</span> <span class="token function-variable function">getGlobal</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> self<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>typeofwindow <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> returnwindow<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> global <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> global<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token function">thrownewError</span><span class="token punctuation">(</span><span class="token string">'unable to locate global object'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ES11引入globalThis作为顶层对象。也就是说，任何环境下，globalThis都是存在的，都可以从它拿到顶层对象，指向全局环境下的this。</p> <h3 id="bigint"><a href="#bigint" class="header-anchor">#</a> BigInt</h3> <p>JavaScript 中 Number 类型只能安全的表示-(2^53-1)至 2^53-1 范的值，即 Number.MIN_SAFE_INTEGER 至 Number.MAX_SAFE_INTEGER，超出这个范围的整数计算或者表示会丢失精度。</p> <p>为了解决该问题，ES2020 引入一种新的数据类型：BigInt。</p> <blockquote><p>BigInt是一种新的数据类型，同 Number，String，Object。</p></blockquote> <p>使用方式：</p> <ol><li><p>在整数字面量后面加<code>n</code></p></li> <li><p>使用BigInt()函数</p></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> num <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">;</span>  <span class="token comment">// -&gt; 9007199254740991</span>

num <span class="token operator">=</span> num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// -&gt; 9007199254740992</span>

<span class="token comment">// 再次加 +1 后无法正常运算</span>
num <span class="token operator">=</span> num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// -&gt; 9007199254740992</span>

<span class="token comment">// 两个不同的值，却返回了true</span>
<span class="token number">9007199254740992</span> <span class="token operator">===</span> <span class="token number">9007199254740993</span><span class="token comment">// -&gt; true</span>

<span class="token comment">// 第一种</span>
<span class="token keyword">var</span> bigIntNum <span class="token operator">=</span> <span class="token number">9007199254740993n</span><span class="token punctuation">;</span>

<span class="token comment">// 第二种</span>
<span class="token keyword">var</span> bigIntNum2 <span class="token operator">=</span> <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token number">9007199254740993</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 或者 BigInt('9007199254740993')</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/2/2021, 5:50:13 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/home/JS/arrows.html" class="prev">
        箭头函数
      </a></span> <span class="next"><a href="/home/TypeScript/base.html">
        基础
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.db583d94.js" defer></script><script src="/assets/js/2.13f24521.js" defer></script><script src="/assets/js/52.7761ae31.js" defer></script>
  </body>
</html>
